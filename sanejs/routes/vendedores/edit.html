<script server>
  const { get, create, update } = require('~/dist/data/vendedores.js');

  server.get('/', async (req, res) => {
    const { id, nombre } = req.query;
    console.log('modificar vendedor', { id, nombre });
    if (id) {
      const vendedor = await get(id);
      res.render(
        self,
        {
          vendedor,
          action: '/vendedores/edit',
        },
        req.isHtmx ? ['main', 'heading', 'title'] : []
      );
    } else {
      const vendedor = { nombre: '', email: '' };
      res.render(
        self,
        {
          vendedor,
          action: '/vendedores/edit',
        },
        req.isHtmx ? ['main', 'heading', 'title'] : []
      );
    }
  });

  server.post('/', async (req, res) => {
    console.log('vendedor post', req.body);
    res.render(
      self,
      {
        vendedor: req.body,
      },
      req.isHtmx ? ['main', 'heading', 'title'] : []
    );
  });
</script>

<title id="title">La Coraz√≥n - Vendedor: {= vendedor.nombre}</title>
<h1 id="heading">
  {? vendedor.id}Modificar{: vendedor.id}Agregar{/? vendedor.id} vendedor
</h1>
<main id="main">{> vendedores/__form}</main>
